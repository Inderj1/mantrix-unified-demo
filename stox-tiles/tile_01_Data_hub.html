<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STOX.AI | Tile 0 - SAP Data Hub</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #0f172a; --bg-secondary: #1e293b; --border-color: #475569;
            --text-primary: #f8fafc; --text-secondary: #94a3b8; --text-muted: #64748b;
            --wharton-blue: #004785; --wharton-maroon: #990000;
            --cyan-400: #22d3ee; --cyan-500: #06b6d4;
            --emerald-400: #34d399; --emerald-500: #10b981;
            --amber-400: #fbbf24; --amber-500: #f59e0b;
            --red-400: #f87171; --red-500: #ef4444;
            --purple-400: #c084fc; --purple-500: #a855f7;
        }
        body { font-family: 'JetBrains Mono', monospace; background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); color: var(--text-primary); min-height: 100vh; padding: 24px; }
        .container { max-width: 1700px; margin: 0 auto; }
        
        /* Header */
        .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 32px; }
        .logo-section { display: flex; align-items: center; gap: 16px; }
        .logo { width: 48px; height: 48px; background: linear-gradient(135deg, var(--wharton-blue), var(--wharton-maroon)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .brand h1 { font-size: 24px; font-weight: 700; color: var(--cyan-400); }
        .brand p { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 2px; }
        .tile-badge { background: linear-gradient(135deg, var(--wharton-blue), var(--wharton-maroon)); padding: 8px 16px; border-radius: 8px; font-size: 12px; font-weight: 600; }
        
        /* Summary Cards */
        .summary-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 16px; margin-bottom: 32px; }
        .summary-card { background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(71, 85, 105, 0.3); border-radius: 12px; padding: 20px; backdrop-filter: blur(10px); }
        .summary-card .label { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .summary-card .value { font-size: 26px; font-weight: 700; color: var(--text-primary); }
        .summary-card .sub { font-size: 11px; color: var(--text-muted); margin-top: 4px; }
        .summary-card.good { border-left: 3px solid var(--emerald-500); }
        .summary-card.warning { border-left: 3px solid var(--amber-500); }
        .summary-card.critical { border-left: 3px solid var(--red-500); }
        .summary-card.neutral { border-left: 3px solid var(--cyan-500); }
        
        /* Table Section */
        .table-section { background: rgba(30, 41, 59, 0.3); border: 1px solid rgba(71, 85, 105, 0.3); border-radius: 16px; overflow: hidden; backdrop-filter: blur(10px); margin-bottom: 24px; }
        .table-header { display: flex; align-items: center; justify-content: space-between; padding: 20px 24px; border-bottom: 1px solid rgba(71, 85, 105, 0.3); background: linear-gradient(90deg, rgba(0, 71, 133, 0.2), rgba(153, 0, 0, 0.2)); }
        .table-header h2 { font-size: 14px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        .table-header h2 span { color: var(--cyan-400); }
        .data-table { width: 100%; border-collapse: collapse; }
        .data-table th { padding: 14px 12px; text-align: left; font-size: 9px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; background: rgba(15, 23, 42, 0.5); border-bottom: 1px solid rgba(71, 85, 105, 0.3); }
        .data-table td { padding: 14px 12px; border-bottom: 1px solid rgba(71, 85, 105, 0.2); font-size: 12px; }
        .data-table tr { cursor: pointer; transition: all 0.2s; }
        .data-table tr:hover { background: rgba(6, 182, 212, 0.05); }
        .data-table tr:hover td:first-child { color: var(--cyan-400); }
        
        /* Status Badges */
        .status-badge { display: inline-flex; align-items: center; gap: 6px; padding: 5px 10px; border-radius: 20px; font-size: 10px; font-weight: 600; }
        .status-badge.connected { background: rgba(16, 185, 129, 0.15); color: var(--emerald-400); border: 1px solid rgba(16, 185, 129, 0.3); }
        .status-badge.delayed { background: rgba(251, 191, 36, 0.15); color: var(--amber-400); border: 1px solid rgba(251, 191, 36, 0.3); }
        .status-badge.error { background: rgba(239, 68, 68, 0.15); color: var(--red-400); border: 1px solid rgba(239, 68, 68, 0.3); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; animation: pulse 2s infinite; }
        .status-dot.green { background: var(--emerald-500); box-shadow: 0 0 8px var(--emerald-500); }
        .status-dot.yellow { background: var(--amber-500); box-shadow: 0 0 8px var(--amber-500); }
        .status-dot.red { background: var(--red-500); box-shadow: 0 0 8px var(--red-500); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .metric-value { font-weight: 600; }
        .metric-value.good { color: var(--emerald-400); }
        .metric-value.warning { color: var(--amber-400); }
        .metric-value.critical { color: var(--red-400); }
        .metric-value.neutral { color: var(--cyan-400); }
        
        .drill-icon { opacity: 0; transition: all 0.2s; color: var(--cyan-400); }
        .data-table tr:hover .drill-icon { opacity: 1; transform: translateX(4px); }
        
        /* Views */
        .detail-view { display: none; }
        .detail-view.active { display: block; }
        .list-view { display: block; }
        .list-view.hidden { display: none; }
        
        /* Back Button */
        .back-btn { display: flex; align-items: center; gap: 8px; padding: 10px 20px; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(71, 85, 105, 0.3); border-radius: 8px; color: var(--text-secondary); cursor: pointer; font-family: inherit; font-size: 12px; margin-bottom: 24px; transition: all 0.2s; }
        .back-btn:hover { background: rgba(6, 182, 212, 0.1); color: var(--cyan-400); border-color: rgba(6, 182, 212, 0.3); }
        
        /* Detail Header */
        .detail-header { display: flex; align-items: center; gap: 20px; margin-bottom: 28px; padding-bottom: 20px; border-bottom: 1px solid rgba(71, 85, 105, 0.3); }
        .detail-logo { width: 64px; height: 64px; background: linear-gradient(135deg, var(--wharton-blue), var(--wharton-maroon)); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 32px; }
        .detail-title h1 { font-size: 28px; font-weight: 700; display: flex; align-items: center; gap: 12px; }
        .detail-title h1 .plant-id { color: var(--cyan-400); }
        .detail-title h1 .plant-name { color: var(--text-secondary); font-size: 18px; font-weight: 500; }
        .detail-title p { font-size: 13px; color: var(--text-muted); margin-top: 6px; }
        .detail-status { margin-left: auto; }
        
        /* Detail Grids */
        .detail-grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 24px; }
        .detail-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px; }
        .detail-grid-2-1 { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 24px; }
        
        /* Detail Cards */
        .detail-card { background: rgba(30, 41, 59, 0.3); border: 1px solid rgba(71, 85, 105, 0.3); border-radius: 14px; padding: 20px; backdrop-filter: blur(10px); }
        .detail-card h3 { font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .detail-card h3 .icon { color: var(--cyan-400); }
        .detail-card h3 .sap-badge { margin-left: auto; font-size: 9px; color: rgba(6, 182, 212, 0.6); background: rgba(6, 182, 212, 0.1); padding: 2px 8px; border-radius: 4px; }
        
        .info-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(71, 85, 105, 0.2); }
        .info-row:last-child { border-bottom: none; }
        .info-row .label { font-size: 11px; color: var(--text-muted); }
        .info-row .value { font-size: 12px; font-weight: 600; color: var(--text-primary); }
        
        /* Table Tags */
        .table-tag { display: inline-block; padding: 4px 10px; margin: 3px; background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.2); border-radius: 6px; font-size: 10px; color: var(--cyan-400); }
        .table-tag.stale { background: rgba(251, 191, 36, 0.1); border-color: rgba(251, 191, 36, 0.2); color: var(--amber-400); }
        .table-tag.error { background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.2); color: var(--red-400); }
        
        /* Progress Bar */
        .progress-bar { height: 6px; background: rgba(71, 85, 105, 0.3); border-radius: 3px; overflow: hidden; margin-top: 8px; }
        .progress-bar .fill { height: 100%; border-radius: 3px; transition: width 0.3s; }
        .progress-bar .fill.good { background: var(--emerald-500); }
        .progress-bar .fill.warning { background: var(--amber-500); }
        .progress-bar .fill.critical { background: var(--red-500); }
        
        /* Job Status */
        .job-row { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: rgba(15, 23, 42, 0.3); border-radius: 8px; margin-bottom: 8px; }
        .job-row .job-name { font-size: 11px; color: var(--text-primary); font-weight: 500; }
        .job-row .job-time { font-size: 10px; color: var(--text-muted); }
        .job-row .job-status { font-size: 10px; font-weight: 600; padding: 3px 8px; border-radius: 4px; }
        .job-row .job-status.success { background: rgba(16, 185, 129, 0.15); color: var(--emerald-400); }
        .job-row .job-status.running { background: rgba(6, 182, 212, 0.15); color: var(--cyan-400); }
        .job-row .job-status.failed { background: rgba(239, 68, 68, 0.15); color: var(--red-400); }
        .job-row .job-status.scheduled { background: rgba(71, 85, 105, 0.3); color: var(--text-muted); }
        
        /* Charts */
        .chart-container { height: 160px; margin: 12px 0; }
        
        /* Error Log */
        .error-item { padding: 10px 12px; background: rgba(15, 23, 42, 0.3); border-radius: 8px; margin-bottom: 8px; border-left: 3px solid; }
        .error-item.critical { border-color: var(--red-500); }
        .error-item.warning { border-color: var(--amber-500); }
        .error-item.info { border-color: var(--cyan-500); }
        .error-item .error-time { font-size: 9px; color: var(--text-muted); margin-bottom: 4px; }
        .error-item .error-msg { font-size: 11px; color: var(--text-primary); }
        .error-item .error-source { font-size: 9px; color: var(--text-muted); margin-top: 4px; }
        
        /* Footer */
        .footer { display: flex; justify-content: space-between; align-items: center; margin-top: 32px; padding-top: 20px; border-top: 1px solid rgba(71, 85, 105, 0.2); font-size: 11px; color: var(--text-muted); }
        .footer .info { display: flex; gap: 16px; }
        .sap-tables { font-size: 9px; color: rgba(6, 182, 212, 0.6); background: rgba(6, 182, 212, 0.1); padding: 4px 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-section">
                <div class="logo">üì°</div>
                <div class="brand">
                    <h1>STOX.AI</h1>
                    <p>SAP Data Hub ‚Äî System Health</p>
                </div>
            </div>
            <div class="tile-badge">TILE 0 ‚Äî INFRASTRUCTURE</div>
        </div>

        <!-- ========== LIST VIEW (DASHBOARD) ========== -->
        <div class="list-view" id="listView">
            <!-- System Health Summary -->
            <div class="summary-grid">
                <div class="summary-card good">
                    <div class="label">Systems Connected</div>
                    <div class="value">4 / 4</div>
                    <div class="sub">All RFC/OData Active</div>
                </div>
                <div class="summary-card good">
                    <div class="label">Data Quality Score</div>
                    <div class="value">97.2%</div>
                    <div class="sub">‚Üë 0.8% vs last week</div>
                </div>
                <div class="summary-card good">
                    <div class="label">Extraction Jobs (24h)</div>
                    <div class="value">156 / 158</div>
                    <div class="sub">98.7% success rate</div>
                </div>
                <div class="summary-card warning">
                    <div class="label">ODQ Delta Backlog</div>
                    <div class="value">12.4K</div>
                    <div class="sub">2 queues behind</div>
                </div>
                <div class="summary-card good">
                    <div class="label">Avg Latency</div>
                    <div class="value">2.4 min</div>
                    <div class="sub">Source ‚Üí STOX.AI</div>
                </div>
                <div class="summary-card good">
                    <div class="label">Errors (24h)</div>
                    <div class="value">2</div>
                    <div class="sub">0 Critical ¬∑ 2 Warning</div>
                </div>
            </div>

            <!-- Plant Systems Table -->
            <div class="table-section">
                <div class="table-header">
                    <h2><span>üîå</span> SAP System Connections ‚Äî Click to View Details</h2>
                    <span class="sap-tables">RFC ¬∑ OData ¬∑ BTP ¬∑ CDS ¬∑ ODP</span>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Plant / System</th>
                            <th>Status</th>
                            <th>SAP Version</th>
                            <th>RFC</th>
                            <th>OData</th>
                            <th>CDS Views</th>
                            <th>ODQ Status</th>
                            <th>Last Sync</th>
                            <th>Latency</th>
                            <th>Data Quality</th>
                            <th>Jobs (24h)</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr onclick="showDetail('P1000')">
                            <td><strong>P1000</strong><br><span style="font-size:10px;color:var(--text-muted)">Chicago Mfg Hub</span></td>
                            <td><span class="status-badge connected"><span class="status-dot green"></span>Connected</span></td>
                            <td>S/4HANA 2023</td>
                            <td><span class="metric-value good">‚óè Active</span></td>
                            <td><span class="metric-value good">‚óè Active</span></td>
                            <td><span class="metric-value neutral">24</span></td>
                            <td><span class="metric-value good">Clear</span></td>
                            <td><span class="metric-value good">2 min</span></td>
                            <td><span class="metric-value good">1.8 min</span></td>
                            <td><span class="metric-value good">98.5%</span></td>
                            <td><span class="metric-value good">42/42</span></td>
                            <td><span class="drill-icon">‚Üí</span></td>
                        </tr>
                        <tr onclick="showDetail('P2000')">
                            <td><strong>P2000</strong><br><span style="font-size:10px;color:var(--text-muted)">Detroit Assembly</span></td>
                            <td><span class="status-badge connected"><span class="status-dot green"></span>Connected</span></td>
                            <td>S/4HANA 2023</td>
                            <td><span class="metric-value good">‚óè Active</span></td>
                            <td><span class="metric-value good">‚óè Active</span></td>
                            <td><span class="metric-value neutral">24</span></td>
                            <td><span class="metric-value warning">8.2K Behind</span></td>
                            <td><span class="metric-value warning">8 min</span></td>
                            <td><span class="metric-value warning">3.2 min</span></td>
                            <td><span class="metric-value good">96.8%</span></td>
                            <td><span class="metric-value warning">38/40</span></td>
                            <td><span class="drill-icon">‚Üí</span></td>
                        </tr>
                        <tr onclick="showDetail('P3000')">
                            <td><strong>P3000</strong><br><span style="font-size:10px;color:var(--text-muted)">Phoenix Distrib</span></td>
                            <td><span class="status-badge delayed"><span class="status-dot yellow"></span>Delayed</span></td>
                            <td>ECC 6.0 EHP8</td>
                            <td><span class="metric-value good">‚óè Active</span></td>
                            <td><span class="metric-value warning">‚óè Slow</span></td>
                            <td><span class="metric-value neutral">18</span></td>
                            <td><span class="metric-value warning">4.2K Behind</span></td>
                            <td><span class="metric-value warning">15 min</span></td>
                            <td><span class="metric-value warning">4.8 min</span></td>
                            <td><span class="metric-value warning">94.2%</span></td>
                            <td><span class="metric-value warning">34/36</span></td>
                            <td><span class="drill-icon">‚Üí</span></td>
                        </tr>
                        <tr onclick="showDetail('P4000')">
                            <td><strong>P4000</strong><br><span style="font-size:10px;color:var(--text-muted)">Atlanta Regional</span></td>
                            <td><span class="status-badge connected"><span class="status-dot green"></span>Connected</span></td>
                            <td>S/4HANA 2022</td>
                            <td><span class="metric-value good">‚óè Active</span></td>
                            <td><span class="metric-value good">‚óè Active</span></td>
                            <td><span class="metric-value neutral">24</span></td>
                            <td><span class="metric-value good">Clear</span></td>
                            <td><span class="metric-value good">2 min</span></td>
                            <td><span class="metric-value good">1.6 min</span></td>
                            <td><span class="metric-value good">99.1%</span></td>
                            <td><span class="metric-value good">40/40</span></td>
                            <td><span class="drill-icon">‚Üí</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ========== DETAIL VIEW (DRILL DOWN) ========== -->
        <div class="detail-view" id="detailView">
            <button class="back-btn" onclick="showList()">‚Üê Back to Dashboard</button>
            
            <!-- Detail Header -->
            <div class="detail-header">
                <div class="detail-logo">üì°</div>
                <div class="detail-title">
                    <h1>
                        <span class="plant-id" id="detailPlantId">P1000</span>
                        <span style="color: var(--text-muted)">|</span>
                        <span class="plant-name" id="detailPlantName">Chicago Manufacturing Hub</span>
                    </h1>
                    <p id="detailPlantDesc">S/4HANA 2023 ¬∑ RFC SM59: STOXAI_P1000 ¬∑ Client 100</p>
                </div>
                <div class="detail-status" id="detailStatusBadge">
                    <span class="status-badge connected"><span class="status-dot green"></span>Connected</span>
                </div>
            </div>

            <!-- Connection Status -->
            <div class="detail-grid-3">
                <div class="detail-card">
                    <h3><span class="icon">üîå</span> Connection Status<span class="sap-badge">SM59 ¬∑ SICF</span></h3>
                    <div class="info-row">
                        <span class="label">RFC Connection</span>
                        <span class="value" style="color: var(--emerald-400);" id="rfcStatus">‚óè Active</span>
                    </div>
                    <div class="info-row">
                        <span class="label">OData Service</span>
                        <span class="value" style="color: var(--emerald-400);" id="odataStatus">‚óè Active</span>
                    </div>
                    <div class="info-row">
                        <span class="label">BTP Integration</span>
                        <span class="value" style="color: var(--emerald-400);" id="btpStatus">‚óè Connected</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Last Heartbeat</span>
                        <span class="value" id="lastHeartbeat">2 min ago</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Avg Response Time</span>
                        <span class="value" id="avgResponse">124 ms</span>
                    </div>
                </div>

                <div class="detail-card">
                    <h3><span class="icon">üìä</span> Data Quality Score<span class="sap-badge">DQM</span></h3>
                    <div class="info-row">
                        <span class="label">Overall Score</span>
                        <span class="value" style="color: var(--emerald-400);" id="dqOverall">98.5%</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Completeness</span>
                        <span class="value" id="dqComplete">99.2%</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Accuracy</span>
                        <span class="value" id="dqAccuracy">97.8%</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Timeliness</span>
                        <span class="value" id="dqTimeliness">98.5%</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Consistency</span>
                        <span class="value" id="dqConsistency">98.4%</span>
                    </div>
                </div>

                <div class="detail-card">
                    <h3><span class="icon">‚è±Ô∏è</span> Delta Queue (ODQ)<span class="sap-badge">ODQMON</span></h3>
                    <div class="info-row">
                        <span class="label">Queue Status</span>
                        <span class="value" style="color: var(--emerald-400);" id="odqStatus">Clear</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Active Subscriptions</span>
                        <span class="value" id="odqSubs">12</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Pending Records</span>
                        <span class="value" id="odqPending">0</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Last Delta Extract</span>
                        <span class="value" id="odqLastDelta">2 min ago</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Cleanup Job</span>
                        <span class="value" style="color: var(--emerald-400);" id="odqCleanup">Scheduled</span>
                    </div>
                </div>
            </div>

            <!-- Extraction Jobs + CDS Views -->
            <div class="detail-grid-2">
                <div class="detail-card">
                    <h3><span class="icon">‚öôÔ∏è</span> Extraction Jobs (Last 24h)<span class="sap-badge">SM37</span></h3>
                    <div id="jobsList">
                        <div class="job-row">
                            <div><span class="job-name">STOX_FULL_MARC_MARD</span><br><span class="job-time">Today 02:00 AM</span></div>
                            <span class="job-status success">‚úì Complete</span>
                        </div>
                        <div class="job-row">
                            <div><span class="job-name">STOX_DELTA_MSEG</span><br><span class="job-time">Today 10:45 AM (Hourly)</span></div>
                            <span class="job-status running">‚óè Running</span>
                        </div>
                        <div class="job-row">
                            <div><span class="job-name">STOX_DELTA_EKBE</span><br><span class="job-time">Today 10:30 AM</span></div>
                            <span class="job-status success">‚úì Complete</span>
                        </div>
                        <div class="job-row">
                            <div><span class="job-name">STOX_DELTA_MVER</span><br><span class="job-time">Today 10:15 AM</span></div>
                            <span class="job-status success">‚úì Complete</span>
                        </div>
                        <div class="job-row">
                            <div><span class="job-name">ODQ_CLEANUP</span><br><span class="job-time">Tomorrow 01:00 AM</span></div>
                            <span class="job-status scheduled">Scheduled</span>
                        </div>
                    </div>
                </div>

                <div class="detail-card">
                    <h3><span class="icon">üìã</span> CDS Views & Table Freshness<span class="sap-badge">SE11 ¬∑ SEGW</span></h3>
                    <div id="tablesList" style="line-height: 2;">
                        <span class="table-tag">MARC ‚Ä¢ 2m</span>
                        <span class="table-tag">MARD ‚Ä¢ 2m</span>
                        <span class="table-tag">MBEW ‚Ä¢ 5m</span>
                        <span class="table-tag">MSEG ‚Ä¢ 2m</span>
                        <span class="table-tag">MKPF ‚Ä¢ 2m</span>
                        <span class="table-tag">EKKO ‚Ä¢ 8m</span>
                        <span class="table-tag">EKPO ‚Ä¢ 8m</span>
                        <span class="table-tag">EKBE ‚Ä¢ 8m</span>
                        <span class="table-tag">EINA ‚Ä¢ 15m</span>
                        <span class="table-tag">EINE ‚Ä¢ 15m</span>
                        <span class="table-tag">LFA1 ‚Ä¢ 1h</span>
                        <span class="table-tag">MVER ‚Ä¢ 5m</span>
                        <span class="table-tag">PLAF ‚Ä¢ 10m</span>
                        <span class="table-tag">MDKP ‚Ä¢ 10m</span>
                        <span class="table-tag">MDTB ‚Ä¢ 10m</span>
                        <span class="table-tag">VBAP ‚Ä¢ 5m</span>
                        <span class="table-tag">LIPS ‚Ä¢ 5m</span>
                    </div>
                </div>
            </div>

            <!-- Throughput Chart + Error Log -->
            <div class="detail-grid-2-1">
                <div class="detail-card">
                    <h3><span class="icon">üìà</span> Data Throughput (Last 24h)</h3>
                    <div class="chart-container">
                        <canvas id="throughputChart"></canvas>
                    </div>
                    <div style="display:flex;gap:24px;margin-top:12px;">
                        <div><span style="font-size:10px;color:var(--text-muted)">Records Extracted</span><br><span style="font-size:18px;font-weight:700;color:var(--emerald-400)" id="totalRecords">2.4M</span></div>
                        <div><span style="font-size:10px;color:var(--text-muted)">Avg Throughput</span><br><span style="font-size:18px;font-weight:700;color:var(--cyan-400)" id="avgThroughput">1.8K/sec</span></div>
                        <div><span style="font-size:10px;color:var(--text-muted)">Peak Load</span><br><span style="font-size:18px;font-weight:700;color:var(--amber-400)" id="peakLoad">4.2K/sec</span></div>
                    </div>
                </div>

                <div class="detail-card">
                    <h3><span class="icon">üö®</span> Error Log (24h)<span class="sap-badge">SM21 ¬∑ ST22</span></h3>
                    <div id="errorLog">
                        <div style="text-align:center;padding:40px 20px;color:var(--text-muted);">
                            <div style="font-size:32px;margin-bottom:12px;">‚úì</div>
                            <div style="font-size:12px;">No errors in last 24 hours</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Resources -->
            <div class="detail-card">
                <h3><span class="icon">üñ•Ô∏è</span> SAP System Resources<span class="sap-badge">ST06 ¬∑ SM66</span></h3>
                <div class="detail-grid-3" style="margin-bottom:0">
                    <div>
                        <div class="info-row" style="border:none;flex-direction:column;">
                            <span class="label">CPU Utilization</span>
                            <span class="value" id="cpuUtil">42%</span>
                            <div class="progress-bar"><div class="fill good" id="cpuBar" style="width:42%"></div></div>
                        </div>
                    </div>
                    <div>
                        <div class="info-row" style="border:none;flex-direction:column;">
                            <span class="label">Memory Usage</span>
                            <span class="value" id="memUtil">68%</span>
                            <div class="progress-bar"><div class="fill good" id="memBar" style="width:68%"></div></div>
                        </div>
                    </div>
                    <div>
                        <div class="info-row" style="border:none;flex-direction:column;">
                            <span class="label">Dialog Work Processes</span>
                            <span class="value" id="wpUtil">12 / 20 Free</span>
                            <div class="progress-bar"><div class="fill good" id="wpBar" style="width:40%"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="info">
                <span>STOX.AI Data Hub</span>
                <span>‚Ä¢</span>
                <span>Tile 0</span>
                <span>‚Ä¢</span>
                <span>Layer: Infrastructure</span>
            </div>
            <div>Last Refresh: Nov 28, 2025 10:47 AM | ¬© 2025 Cloud Mantra LLC</div>
        </div>
    </div>

    <script>
        // Plant data
        const plantData = {
            'P1000': {
                id: 'P1000', name: 'Chicago Manufacturing Hub', desc: 'S/4HANA 2023 ¬∑ RFC SM59: STOXAI_P1000 ¬∑ Client 100',
                status: 'connected', statusText: 'Connected', statusDot: 'green',
                rfc: '‚óè Active', odata: '‚óè Active', btp: '‚óè Connected', heartbeat: '2 min ago', response: '124 ms',
                dq: { overall: '98.5%', complete: '99.2%', accuracy: '97.8%', timeliness: '98.5%', consistency: '98.4%' },
                odq: { status: 'Clear', statusColor: 'var(--emerald-400)', subs: '12', pending: '0', lastDelta: '2 min ago', cleanup: 'Scheduled' },
                jobs: [
                    { name: 'STOX_FULL_MARC_MARD', time: 'Today 02:00 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_MSEG', time: 'Today 10:45 AM (Hourly)', status: 'running', statusText: '‚óè Running' },
                    { name: 'STOX_DELTA_EKBE', time: 'Today 10:30 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_MVER', time: 'Today 10:15 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'ODQ_CLEANUP', time: 'Tomorrow 01:00 AM', status: 'scheduled', statusText: 'Scheduled' }
                ],
                tables: ['MARC ‚Ä¢ 2m', 'MARD ‚Ä¢ 2m', 'MBEW ‚Ä¢ 5m', 'MSEG ‚Ä¢ 2m', 'MKPF ‚Ä¢ 2m', 'EKKO ‚Ä¢ 8m', 'EKPO ‚Ä¢ 8m', 'EKBE ‚Ä¢ 8m', 'EINA ‚Ä¢ 15m', 'EINE ‚Ä¢ 15m', 'LFA1 ‚Ä¢ 1h', 'MVER ‚Ä¢ 5m', 'PLAF ‚Ä¢ 10m', 'MDKP ‚Ä¢ 10m', 'VBAP ‚Ä¢ 5m', 'LIPS ‚Ä¢ 5m'],
                throughput: [1200, 1400, 1100, 1800, 4200, 2100, 1600, 1400, 1200, 1500, 1800, 1600],
                records: '2.4M', avgThroughput: '1.8K/sec', peakLoad: '4.2K/sec',
                errors: [],
                cpu: 42, mem: 68, wp: '12 / 20 Free', wpPct: 40
            },
            'P2000': {
                id: 'P2000', name: 'Detroit Assembly Center', desc: 'S/4HANA 2023 ¬∑ RFC SM59: STOXAI_P2000 ¬∑ Client 100',
                status: 'connected', statusText: 'Connected', statusDot: 'green',
                rfc: '‚óè Active', odata: '‚óè Active', btp: '‚óè Connected', heartbeat: '8 min ago', response: '342 ms',
                dq: { overall: '96.8%', complete: '98.1%', accuracy: '95.2%', timeliness: '96.8%', consistency: '97.1%' },
                odq: { status: '8.2K Behind', statusColor: 'var(--amber-400)', subs: '12', pending: '8,247', lastDelta: '8 min ago', cleanup: 'Scheduled' },
                jobs: [
                    { name: 'STOX_FULL_MARC_MARD', time: 'Today 02:00 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_MSEG', time: 'Today 10:32 AM', status: 'failed', statusText: '‚úó Failed' },
                    { name: 'STOX_DELTA_MSEG', time: 'Today 10:45 AM (Retry)', status: 'running', statusText: '‚óè Running' },
                    { name: 'STOX_DELTA_EKBE', time: 'Today 10:30 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'ODQ_CLEANUP', time: 'Tomorrow 01:00 AM', status: 'scheduled', statusText: 'Scheduled' }
                ],
                tables: ['MARC ‚Ä¢ 2m', 'MARD ‚Ä¢ 2m', 'MBEW ‚Ä¢ 5m', 'MSEG ‚Ä¢ 8m:stale', 'MKPF ‚Ä¢ 8m:stale', 'EKKO ‚Ä¢ 8m', 'EKPO ‚Ä¢ 8m', 'EKBE ‚Ä¢ 8m', 'EINA ‚Ä¢ 15m', 'EINE ‚Ä¢ 15m', 'LFA1 ‚Ä¢ 1h', 'MVER ‚Ä¢ 5m', 'PLAF ‚Ä¢ 10m', 'MDKP ‚Ä¢ 10m', 'VBAP ‚Ä¢ 5m', 'LIPS ‚Ä¢ 5m'],
                throughput: [1100, 1300, 1000, 1600, 800, 400, 1200, 1400, 1100, 1300, 1500, 1400],
                records: '1.8M', avgThroughput: '1.2K/sec', peakLoad: '1.6K/sec',
                errors: [
                    { type: 'warning', time: 'Today 10:32 AM', msg: 'MSEG delta extraction timeout - RFC_COMMUNICATION_FAILURE', source: 'Job: STOX_DELTA_MSEG' },
                    { type: 'info', time: 'Today 10:33 AM', msg: 'Automatic retry scheduled for STOX_DELTA_MSEG', source: 'System' }
                ],
                cpu: 78, mem: 82, wp: '4 / 20 Free', wpPct: 80
            },
            'P3000': {
                id: 'P3000', name: 'Phoenix Distribution', desc: 'ECC 6.0 EHP8 ¬∑ RFC SM59: STOXAI_P3000 ¬∑ Client 200',
                status: 'delayed', statusText: 'Delayed', statusDot: 'yellow',
                rfc: '‚óè Active', odata: '‚óè Slow', btp: '‚óè Connected', heartbeat: '15 min ago', response: '892 ms',
                dq: { overall: '94.2%', complete: '96.4%', accuracy: '92.1%', timeliness: '93.8%', consistency: '94.5%' },
                odq: { status: '4.2K Behind', statusColor: 'var(--amber-400)', subs: '10', pending: '4,218', lastDelta: '15 min ago', cleanup: 'Scheduled' },
                jobs: [
                    { name: 'STOX_FULL_MARC_MARD', time: 'Today 02:00 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_MSEG', time: 'Today 10:30 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_EKBE', time: 'Today 10:28 AM', status: 'failed', statusText: '‚úó Failed' },
                    { name: 'STOX_DELTA_MVER', time: 'Today 10:15 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'ODQ_CLEANUP', time: 'Tomorrow 01:00 AM', status: 'scheduled', statusText: 'Scheduled' }
                ],
                tables: ['MARC ‚Ä¢ 5m', 'MARD ‚Ä¢ 5m', 'MBEW ‚Ä¢ 12m', 'MSEG ‚Ä¢ 5m', 'MKPF ‚Ä¢ 5m', 'EKKO ‚Ä¢ 15m:stale', 'EKPO ‚Ä¢ 15m:stale', 'EKBE ‚Ä¢ 28m:stale', 'EINA ‚Ä¢ 30m', 'EINE ‚Ä¢ 30m', 'LFA1 ‚Ä¢ 2h', 'MVER ‚Ä¢ 12m', 'PLAF ‚Ä¢ 18m', 'MDKP ‚Ä¢ 18m', 'VBAP ‚Ä¢ 12m', 'LIPS ‚Ä¢ 12m'],
                throughput: [800, 900, 700, 1100, 600, 500, 800, 900, 700, 900, 1000, 800],
                records: '1.2M', avgThroughput: '0.8K/sec', peakLoad: '1.1K/sec',
                errors: [
                    { type: 'warning', time: 'Today 10:28 AM', msg: 'EKBE extraction failed - Table lock contention', source: 'Job: STOX_DELTA_EKBE' }
                ],
                cpu: 86, mem: 88, wp: '2 / 16 Free', wpPct: 88
            },
            'P4000': {
                id: 'P4000', name: 'Atlanta Regional DC', desc: 'S/4HANA 2022 ¬∑ RFC SM59: STOXAI_P4000 ¬∑ Client 100',
                status: 'connected', statusText: 'Connected', statusDot: 'green',
                rfc: '‚óè Active', odata: '‚óè Active', btp: '‚óè Connected', heartbeat: '2 min ago', response: '98 ms',
                dq: { overall: '99.1%', complete: '99.5%', accuracy: '98.8%', timeliness: '99.1%', consistency: '98.9%' },
                odq: { status: 'Clear', statusColor: 'var(--emerald-400)', subs: '12', pending: '0', lastDelta: '2 min ago', cleanup: 'Scheduled' },
                jobs: [
                    { name: 'STOX_FULL_MARC_MARD', time: 'Today 02:00 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_MSEG', time: 'Today 10:45 AM (Hourly)', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_EKBE', time: 'Today 10:30 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'STOX_DELTA_MVER', time: 'Today 10:15 AM', status: 'success', statusText: '‚úì Complete' },
                    { name: 'ODQ_CLEANUP', time: 'Tomorrow 01:00 AM', status: 'scheduled', statusText: 'Scheduled' }
                ],
                tables: ['MARC ‚Ä¢ 2m', 'MARD ‚Ä¢ 2m', 'MBEW ‚Ä¢ 4m', 'MSEG ‚Ä¢ 2m', 'MKPF ‚Ä¢ 2m', 'EKKO ‚Ä¢ 6m', 'EKPO ‚Ä¢ 6m', 'EKBE ‚Ä¢ 6m', 'EINA ‚Ä¢ 12m', 'EINE ‚Ä¢ 12m', 'LFA1 ‚Ä¢ 45m', 'MVER ‚Ä¢ 4m', 'PLAF ‚Ä¢ 8m', 'MDKP ‚Ä¢ 8m', 'VBAP ‚Ä¢ 4m', 'LIPS ‚Ä¢ 4m'],
                throughput: [1400, 1600, 1300, 2000, 2800, 2200, 1800, 1600, 1400, 1700, 2000, 1800],
                records: '2.8M', avgThroughput: '2.1K/sec', peakLoad: '2.8K/sec',
                errors: [],
                cpu: 35, mem: 52, wp: '16 / 20 Free', wpPct: 20
            }
        };

        let currentChart = null;

        function showDetail(plantId) {
            const p = plantData[plantId];
            if (!p) return;
            
            document.getElementById('listView').classList.add('hidden');
            document.getElementById('detailView').classList.add('active');
            
            // Header
            document.getElementById('detailPlantId').textContent = p.id;
            document.getElementById('detailPlantName').textContent = p.name;
            document.getElementById('detailPlantDesc').textContent = p.desc;
            document.getElementById('detailStatusBadge').innerHTML = `<span class="status-badge ${p.status}"><span class="status-dot ${p.statusDot}"></span>${p.statusText}</span>`;
            
            // Connection
            document.getElementById('rfcStatus').textContent = p.rfc;
            document.getElementById('rfcStatus').style.color = p.rfc.includes('Active') ? 'var(--emerald-400)' : 'var(--amber-400)';
            document.getElementById('odataStatus').textContent = p.odata;
            document.getElementById('odataStatus').style.color = p.odata.includes('Active') ? 'var(--emerald-400)' : 'var(--amber-400)';
            document.getElementById('btpStatus').textContent = p.btp;
            document.getElementById('lastHeartbeat').textContent = p.heartbeat;
            document.getElementById('avgResponse').textContent = p.response;
            
            // Data Quality
            document.getElementById('dqOverall').textContent = p.dq.overall;
            document.getElementById('dqOverall').style.color = parseFloat(p.dq.overall) >= 97 ? 'var(--emerald-400)' : (parseFloat(p.dq.overall) >= 95 ? 'var(--amber-400)' : 'var(--red-400)');
            document.getElementById('dqComplete').textContent = p.dq.complete;
            document.getElementById('dqAccuracy').textContent = p.dq.accuracy;
            document.getElementById('dqTimeliness').textContent = p.dq.timeliness;
            document.getElementById('dqConsistency').textContent = p.dq.consistency;
            
            // ODQ
            document.getElementById('odqStatus').textContent = p.odq.status;
            document.getElementById('odqStatus').style.color = p.odq.statusColor;
            document.getElementById('odqSubs').textContent = p.odq.subs;
            document.getElementById('odqPending').textContent = p.odq.pending;
            document.getElementById('odqLastDelta').textContent = p.odq.lastDelta;
            document.getElementById('odqCleanup').textContent = p.odq.cleanup;
            
            // Jobs
            document.getElementById('jobsList').innerHTML = p.jobs.map(j => `
                <div class="job-row">
                    <div><span class="job-name">${j.name}</span><br><span class="job-time">${j.time}</span></div>
                    <span class="job-status ${j.status}">${j.statusText}</span>
                </div>
            `).join('');
            
            // Tables
            document.getElementById('tablesList').innerHTML = p.tables.map(t => {
                const isStale = t.includes(':stale');
                const clean = t.replace(':stale', '');
                return `<span class="table-tag ${isStale ? 'stale' : ''}">${clean}</span>`;
            }).join('');
            
            // Throughput
            document.getElementById('totalRecords').textContent = p.records;
            document.getElementById('avgThroughput').textContent = p.avgThroughput;
            document.getElementById('peakLoad').textContent = p.peakLoad;
            
            // Errors
            if (p.errors.length === 0) {
                document.getElementById('errorLog').innerHTML = `
                    <div style="text-align:center;padding:40px 20px;color:var(--text-muted);">
                        <div style="font-size:32px;margin-bottom:12px;">‚úì</div>
                        <div style="font-size:12px;">No errors in last 24 hours</div>
                    </div>`;
            } else {
                document.getElementById('errorLog').innerHTML = p.errors.map(e => `
                    <div class="error-item ${e.type}">
                        <div class="error-time">${e.time}</div>
                        <div class="error-msg">${e.msg}</div>
                        <div class="error-source">${e.source}</div>
                    </div>
                `).join('');
            }
            
            // Resources
            document.getElementById('cpuUtil').textContent = p.cpu + '%';
            document.getElementById('cpuBar').style.width = p.cpu + '%';
            document.getElementById('cpuBar').className = 'fill ' + (p.cpu < 70 ? 'good' : (p.cpu < 85 ? 'warning' : 'critical'));
            document.getElementById('memUtil').textContent = p.mem + '%';
            document.getElementById('memBar').style.width = p.mem + '%';
            document.getElementById('memBar').className = 'fill ' + (p.mem < 70 ? 'good' : (p.mem < 85 ? 'warning' : 'critical'));
            document.getElementById('wpUtil').textContent = p.wp;
            document.getElementById('wpBar').style.width = p.wpPct + '%';
            document.getElementById('wpBar').className = 'fill ' + (p.wpPct < 60 ? 'good' : (p.wpPct < 80 ? 'warning' : 'critical'));
            
            // Chart
            setTimeout(() => {
                if (currentChart) currentChart.destroy();
                const ctx = document.getElementById('throughputChart').getContext('2d');
                currentChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['00', '02', '04', '06', '08', '10', '12', '14', '16', '18', '20', '22'],
                        datasets: [{
                            data: p.throughput,
                            backgroundColor: 'rgba(6, 182, 212, 0.6)',
                            borderColor: 'rgba(6, 182, 212, 1)',
                            borderWidth: 1,
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            x: { grid: { display: false }, ticks: { color: '#64748b', font: { size: 9 } } },
                            y: { grid: { color: 'rgba(71, 85, 105, 0.2)' }, ticks: { color: '#64748b', font: { size: 9 }, callback: v => v/1000 + 'K' } }
                        }
                    }
                });
            }, 100);
        }
        
        function showList() {
            document.getElementById('listView').classList.remove('hidden');
            document.getElementById('detailView').classList.remove('active');
        }
    </script>
</body>
</html>
