@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix ap: <http://mantrix.ai/ontology/ap#> .
@prefix mantrix: <http://mantrix.ai/ontology#> .

# ============================================================================
# Semantic Terms: 3-Way Match / 2-Way Match / GR Missing
# ============================================================================

ap:term_three_way_match a mantrix:SemanticTerm ;
    rdfs:label "3-way match" ;
    rdfs:comment "Verification that PO, GR, and Invoice all agree on quantity and price. Required when EKPO.WEPOS = true. The standard AP control for procured goods." ;
    skos:altLabel "three way match" , "3WM" , "PO-GR-IR match" ;
    mantrix:disambiguation "3-way match compares: PO qty/price (EKPO) ↔ GR qty (MATDOC) ↔ Invoice qty/price (RSEG). All three must agree within tolerance." ;
    mantrix:canonicalEntity "MATCH_CASES WHERE MATCH_TYPE = '3_way'" ;
    mantrix:relatedTerms "2-way match, tolerance, variance, WEPOS" .

ap:term_two_way_match a mantrix:SemanticTerm ;
    rdfs:label "2-way match" ;
    rdfs:comment "Verification that PO and Invoice agree (no GR required). Used for services and items where EKPO.WEPOS = false." ;
    skos:altLabel "two way match" , "2WM" , "PO-IR match" ;
    mantrix:disambiguation "2-way match: PO qty/price (EKPO) ↔ Invoice qty/price (RSEG). No GR comparison. Used for services (PSTYP=9) or when WEPOS=false." ;
    mantrix:canonicalEntity "MATCH_CASES WHERE MATCH_TYPE = '2_way'" ;
    mantrix:relatedTerms "3-way match, service PO, WEPOS" .

ap:term_gr_missing a mantrix:SemanticTerm ;
    rdfs:label "GR missing" ;
    rdfs:comment "Invoice received but goods receipt not yet posted. Blocks 3-way match completion. Common block reason." ;
    skos:altLabel "no goods receipt" , "missing GR" , "GR not posted" , "awaiting receipt" ;
    mantrix:disambiguation "'GR missing' → invoice exists (RSEG) but no matching MATDOC record with BWART='101' for the same PO item." ;
    mantrix:canonicalFilter "MATCH_CASES.EXCEPTION_REASONS LIKE '%gr_missing%'" ;
    mantrix:relatedTerms "blocked, 3-way match, goods receipt" .
