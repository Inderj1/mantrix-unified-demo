<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORDLY.AI MTS - Tile 4: Learning Loop</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'JetBrains Mono', monospace; background: linear-gradient(135deg, #0a0f1a 0%, #0d1520 100%); min-height: 100vh; color: #e2e8f0; }
        
        .order-context-bar { display: flex; justify-content: space-between; align-items: center; padding: 12px 24px; background: linear-gradient(90deg, rgba(168, 85, 247, 0.1) 0%, rgba(15, 23, 42, 0.9) 100%); border-bottom: 1px solid rgba(168, 85, 247, 0.3); }
        .order-context-left { display: flex; align-items: center; gap: 24px; }
        .btn-back { display: flex; align-items: center; gap: 6px; padding: 6px 12px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 4px; color: #94a3b8; font-size: 11px; cursor: pointer; text-decoration: none; }
        .order-info { display: flex; align-items: center; gap: 16px; }
        .order-po { font-size: 16px; font-weight: 700; color: #22d3ee; }
        .order-customer { font-size: 14px; color: #e2e8f0; }
        .order-material { font-size: 12px; color: #94a3b8; }
        .order-context-right { display: flex; align-items: center; gap: 16px; }
        .order-value-amount { font-size: 18px; font-weight: 700; color: #34d399; }
        .order-value-label { font-size: 10px; color: #64748b; }
        .status-badge { padding: 6px 12px; border-radius: 4px; font-size: 11px; font-weight: 600; background: rgba(168, 85, 247, 0.15); color: #a855f7; }
        
        .flow-indicator { display: flex; justify-content: center; gap: 8px; padding: 12px 24px; background: rgba(0, 0, 0, 0.2); border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
        .flow-step { display: flex; align-items: center; gap: 8px; padding: 6px 14px; border-radius: 6px; font-size: 11px; color: #64748b; background: rgba(255, 255, 255, 0.03); }
        .flow-step.active { background: rgba(168, 85, 247, 0.15); color: #a855f7; border: 1px solid rgba(168, 85, 247, 0.3); }
        .flow-step.complete { background: rgba(52, 211, 153, 0.1); color: #34d399; }
        .flow-arrow { color: #475569; }
        
        .outcome-banner { display: flex; align-items: center; justify-content: space-between; padding: 16px 24px; background: linear-gradient(90deg, rgba(52, 211, 153, 0.15) 0%, rgba(168, 85, 247, 0.1) 100%); border-bottom: 1px solid rgba(52, 211, 153, 0.3); }
        .outcome-left { display: flex; align-items: center; gap: 16px; }
        .outcome-icon { font-size: 28px; }
        .outcome-text { font-size: 14px; font-weight: 600; color: #34d399; }
        .outcome-detail { font-size: 11px; color: #94a3b8; margin-top: 2px; }
        .outcome-right { display: flex; gap: 24px; }
        .outcome-metric { text-align: center; }
        .outcome-metric-value { font-size: 20px; font-weight: 700; }
        .outcome-metric-value.emerald { color: #34d399; }
        .outcome-metric-value.amber { color: #fbbf24; }
        .outcome-metric-value.purple { color: #a855f7; }
        .outcome-metric-label { font-size: 9px; color: #64748b; text-transform: uppercase; }
        
        .summary-strip { display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; padding: 16px 24px; background: rgba(0, 0, 0, 0.2); }
        .summary-card { background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; text-align: center; }
        .summary-value { font-size: 18px; font-weight: 700; }
        .summary-value.emerald { color: #34d399; }
        .summary-value.amber { color: #fbbf24; }
        .summary-value.cyan { color: #22d3ee; }
        .summary-value.purple { color: #a855f7; }
        .summary-value.red { color: #f87171; }
        .summary-label { font-size: 9px; color: #64748b; text-transform: uppercase; margin-top: 4px; }
        
        .main-content { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px 24px; height: calc(100vh - 280px); }
        
        .panel { background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(15, 23, 42, 0.7) 100%); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 12px; display: flex; flex-direction: column; overflow: hidden; }
        .panel-header { padding: 16px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); background: rgba(0, 0, 0, 0.2); }
        .panel-title { font-size: 13px; font-weight: 600; color: #e2e8f0; }
        .panel-subtitle { font-size: 10px; color: #64748b; }
        .panel-content { flex: 1; overflow-y: auto; padding: 16px; }
        
        .section-title { font-size: 12px; font-weight: 600; color: #e2e8f0; margin: 16px 0 12px 0; display: flex; align-items: center; gap: 8px; }
        .section-title:first-child { margin-top: 0; }
        
        .variance-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
        .variance-card { background: rgba(0, 0, 0, 0.3); border-radius: 8px; padding: 14px; }
        .variance-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .variance-label { font-size: 10px; color: #94a3b8; text-transform: uppercase; }
        .variance-delta { font-size: 10px; font-weight: 600; padding: 2px 6px; border-radius: 3px; }
        .variance-delta.positive { background: rgba(52, 211, 153, 0.2); color: #34d399; }
        .variance-delta.negative { background: rgba(248, 113, 113, 0.2); color: #f87171; }
        .variance-delta.neutral { background: rgba(148, 163, 184, 0.2); color: #94a3b8; }
        .variance-values { display: flex; justify-content: space-between; align-items: baseline; }
        .variance-planned { font-size: 11px; color: #64748b; }
        .variance-actual { font-size: 16px; font-weight: 700; color: #e2e8f0; }
        .variance-bar { height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; margin-top: 8px; overflow: hidden; }
        .variance-bar-fill { height: 100%; border-radius: 3px; }
        .variance-bar-fill.good { background: linear-gradient(90deg, #34d399, #22d3ee); }
        .variance-bar-fill.bad { background: linear-gradient(90deg, #f87171, #ef4444); }
        
        .deduction-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(0, 0, 0, 0.2); border-radius: 6px; margin-bottom: 8px; }
        .deduction-icon { font-size: 16px; }
        .deduction-info { flex: 1; }
        .deduction-type { font-size: 11px; font-weight: 600; color: #e2e8f0; }
        .deduction-detail { font-size: 10px; color: #94a3b8; }
        .deduction-amount { font-size: 14px; font-weight: 700; }
        .deduction-amount.zero { color: #34d399; }
        .deduction-amount.charged { color: #f87171; }
        
        .model-update { background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 8px; padding: 14px; margin-bottom: 10px; }
        .model-update-header { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .model-name { font-size: 11px; font-weight: 600; color: #a855f7; }
        .model-confidence { font-size: 10px; color: #94a3b8; }
        .model-change { font-size: 10px; color: #cbd5e1; line-height: 1.5; }
        .model-change strong { color: #34d399; }
        .model-impact { font-size: 9px; color: #64748b; margin-top: 6px; padding-top: 6px; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        
        .insight-card { background: rgba(52, 211, 153, 0.05); border: 1px solid rgba(52, 211, 153, 0.2); border-radius: 8px; padding: 14px; margin-bottom: 10px; }
        .insight-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .insight-icon { font-size: 14px; }
        .insight-title { font-size: 11px; font-weight: 600; color: #34d399; }
        .insight-body { font-size: 10px; color: #cbd5e1; line-height: 1.6; }
        .insight-body strong { color: #e2e8f0; }
        
        .trend-chart { background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 16px; }
        .trend-header { display: flex; justify-content: space-between; margin-bottom: 12px; }
        .trend-title { font-size: 11px; font-weight: 600; color: #e2e8f0; }
        .trend-period { font-size: 10px; color: #64748b; }
        .trend-bars { display: flex; align-items: flex-end; gap: 8px; height: 80px; }
        .trend-bar-item { flex: 1; display: flex; flex-direction: column; align-items: center; }
        .trend-bar { width: 100%; border-radius: 3px 3px 0 0; }
        .trend-bar.good { background: linear-gradient(180deg, #34d399, #059669); }
        .trend-bar.medium { background: linear-gradient(180deg, #fbbf24, #d97706); }
        .trend-bar.bad { background: linear-gradient(180deg, #f87171, #dc2626); }
        .trend-label { font-size: 8px; color: #64748b; margin-top: 4px; }
        .trend-value { font-size: 9px; color: #94a3b8; font-weight: 600; }
        
        .compound-card { background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 8px; padding: 16px; }
        .compound-header { display: flex; justify-content: space-between; margin-bottom: 12px; }
        .compound-title { font-size: 12px; font-weight: 600; color: #e2e8f0; }
        .compound-period { font-size: 10px; color: #94a3b8; }
        .compound-metrics { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .compound-metric { text-align: center; padding: 12px; background: rgba(0, 0, 0, 0.2); border-radius: 6px; }
        .compound-metric-value { font-size: 18px; font-weight: 700; color: #34d399; }
        .compound-metric-label { font-size: 9px; color: #64748b; margin-top: 4px; }
        .compound-metric-delta { font-size: 10px; color: #a855f7; margin-top: 2px; }
        
        .action-footer { display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; border-top: 1px solid rgba(168, 85, 247, 0.2); background: rgba(0, 0, 0, 0.3); }
        .footer-info { display: flex; gap: 16px; font-size: 11px; color: #64748b; }
        .footer-actions { display: flex; gap: 10px; }
        .btn { padding: 10px 18px; border-radius: 6px; font-family: inherit; font-size: 12px; font-weight: 500; cursor: pointer; }
        .btn-secondary { background: transparent; border: 1px solid rgba(255, 255, 255, 0.2); color: #94a3b8; }
        .btn-primary { background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%); border: none; color: white; font-weight: 600; }
    </style>
</head>
<body>
    <div class="order-context-bar">
        <div class="order-context-left">
            <a href="#" class="btn-back">‚Üê Back to Queue</a>
            <div class="order-info">
                <span class="order-po">EDI-850-78432</span>
                <span class="order-customer">Walmart Distribution</span>
                <span class="order-material">SKU-7742 Energy Drink 12-Pack ‚Ä¢ 15,000 cases</span>
            </div>
        </div>
        <div class="order-context-right">
            <div style="text-align: right;">
                <div class="order-value-amount">$247,500</div>
                <div class="order-value-label">Order Value</div>
            </div>
            <div class="status-badge">üß† LEARNING</div>
        </div>
    </div>

    <div class="flow-indicator">
        <div class="flow-step complete"><span>‚úì</span><span>Demand Signal</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step complete"><span>‚úì</span><span>Network Optimizer</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step complete"><span>‚úì</span><span>Arbitration</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step complete"><span>‚úì</span><span>SAP Commit</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step active"><span>4</span><span>Learning Loop</span></div>
    </div>

    <div class="outcome-banner">
        <div class="outcome-left">
            <span class="outcome-icon">‚úÖ</span>
            <div>
                <div class="outcome-text">Perfect Order Achieved ‚Äî Decision Validated</div>
                <div class="outcome-detail">Delivered on-time, in-full, no chargebacks ‚Ä¢ Models updated</div>
            </div>
        </div>
        <div class="outcome-right">
            <div class="outcome-metric">
                <div class="outcome-metric-value emerald">100%</div>
                <div class="outcome-metric-label">OTIF Score</div>
            </div>
            <div class="outcome-metric">
                <div class="outcome-metric-value emerald">$0</div>
                <div class="outcome-metric-label">Chargebacks</div>
            </div>
            <div class="outcome-metric">
                <div class="outcome-metric-value purple">+2.1%</div>
                <div class="outcome-metric-label">Model Confidence</div>
            </div>
        </div>
    </div>

    <div class="summary-strip">
        <div class="summary-card"><div class="summary-value emerald">$18,120</div><div class="summary-label">Actual Freight</div></div>
        <div class="summary-card"><div class="summary-value emerald">Jan 18</div><div class="summary-label">Actual Delivery</div></div>
        <div class="summary-card"><div class="summary-value emerald">$0</div><div class="summary-label">Chargebacks</div></div>
        <div class="summary-card"><div class="summary-value emerald">$0</div><div class="summary-label">Deductions</div></div>
        <div class="summary-card"><div class="summary-value emerald">29.1%</div><div class="summary-label">Realized Margin</div></div>
        <div class="summary-card"><div class="summary-value purple">6</div><div class="summary-label">Models Updated</div></div>
    </div>

    <div class="main-content">
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">Planned vs Actual Analysis</div>
                <div class="panel-subtitle">Closing the loop between decision and outcome</div>
            </div>
            <div class="panel-content">
                <div class="section-title">üìä Variance Analysis</div>
                <div class="variance-grid">
                    <div class="variance-card">
                        <div class="variance-header">
                            <span class="variance-label">Freight Cost</span>
                            <span class="variance-delta positive">-$330</span>
                        </div>
                        <div class="variance-values">
                            <span class="variance-planned">Planned: $18,450</span>
                            <span class="variance-actual">$18,120</span>
                        </div>
                        <div class="variance-bar"><div class="variance-bar-fill good" style="width: 98%;"></div></div>
                    </div>
                    <div class="variance-card">
                        <div class="variance-header">
                            <span class="variance-label">Delivery Date</span>
                            <span class="variance-delta positive">ON TIME</span>
                        </div>
                        <div class="variance-values">
                            <span class="variance-planned">Planned: Jan 18</span>
                            <span class="variance-actual">Jan 18</span>
                        </div>
                        <div class="variance-bar"><div class="variance-bar-fill good" style="width: 100%;"></div></div>
                    </div>
                    <div class="variance-card">
                        <div class="variance-header">
                            <span class="variance-label">Quantity Delivered</span>
                            <span class="variance-delta positive">IN FULL</span>
                        </div>
                        <div class="variance-values">
                            <span class="variance-planned">Ordered: 15,000 CS</span>
                            <span class="variance-actual">15,000 CS</span>
                        </div>
                        <div class="variance-bar"><div class="variance-bar-fill good" style="width: 100%;"></div></div>
                    </div>
                    <div class="variance-card">
                        <div class="variance-header">
                            <span class="variance-label">Realized Margin</span>
                            <span class="variance-delta positive">+0.7%</span>
                        </div>
                        <div class="variance-values">
                            <span class="variance-planned">Expected: 28.4%</span>
                            <span class="variance-actual">29.1%</span>
                        </div>
                        <div class="variance-bar"><div class="variance-bar-fill good" style="width: 100%;"></div></div>
                    </div>
                </div>

                <div class="section-title">üí∞ Chargeback & Deduction Tracking</div>
                <div class="deduction-item">
                    <span class="deduction-icon">üéØ</span>
                    <div class="deduction-info">
                        <div class="deduction-type">OTIF Compliance</div>
                        <div class="deduction-detail">Delivered within MABD window</div>
                    </div>
                    <span class="deduction-amount zero">$0</span>
                </div>
                <div class="deduction-item">
                    <span class="deduction-icon">üì¶</span>
                    <div class="deduction-info">
                        <div class="deduction-type">Quantity Variance</div>
                        <div class="deduction-detail">100% fill rate achieved</div>
                    </div>
                    <span class="deduction-amount zero">$0</span>
                </div>
                <div class="deduction-item">
                    <span class="deduction-icon">üìã</span>
                    <div class="deduction-info">
                        <div class="deduction-type">Documentation Compliance</div>
                        <div class="deduction-detail">ASN, BOL, POD all matched</div>
                    </div>
                    <span class="deduction-amount zero">$0</span>
                </div>
                <div class="deduction-item">
                    <span class="deduction-icon">üöö</span>
                    <div class="deduction-info">
                        <div class="deduction-type">Carrier Claims</div>
                        <div class="deduction-detail">No damage reported</div>
                    </div>
                    <span class="deduction-amount zero">$0</span>
                </div>

                <div class="section-title">üìà Customer Satisfaction Signal</div>
                <div class="insight-card">
                    <div class="insight-header">
                        <span class="insight-icon">üëç</span>
                        <span class="insight-title">Positive Signal Detected</span>
                    </div>
                    <div class="insight-body">
                        Walmart DC-7 has placed a <strong>repeat promo order</strong> for Feb 2025 ‚Äî 18,000 CS (+20% vs this order). Historical pattern: repeat orders within 30 days indicate high satisfaction.
                    </div>
                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">Model Updates & Learning</div>
                <div class="panel-subtitle">Compounding intelligence from every execution</div>
            </div>
            <div class="panel-content">
                <div class="section-title">üß† Models Updated</div>
                
                <div class="model-update">
                    <div class="model-update-header">
                        <span class="model-name">Lane Cost Model</span>
                        <span class="model-confidence">Confidence: 94% ‚Üí 96%</span>
                    </div>
                    <div class="model-change">
                        Memphis ‚Üí Bentonville lane cost updated: <strong>$1.21/CS ‚Üí $1.18/CS</strong> based on actual carrier invoice. Split shipment premium validated.
                    </div>
                    <div class="model-impact">Impact: Future Memphis fulfillment decisions will use refined cost</div>
                </div>

                <div class="model-update">
                    <div class="model-update-header">
                        <span class="model-name">Service Probability Model</span>
                        <span class="model-confidence">Confidence: 89% ‚Üí 91%</span>
                    </div>
                    <div class="model-change">
                        Promo-period split shipment P(On-Time) validated: predicted <strong>94%</strong>, actual <strong>100%</strong>. Model bias adjustment: +2% for multi-node promo orders.
                    </div>
                    <div class="model-impact">Impact: Higher confidence in split-ship recommendations during promos</div>
                </div>

                <div class="model-update">
                    <div class="model-update-header">
                        <span class="model-name">Inventory Shadow Pricing</span>
                        <span class="model-confidence">Confidence: 82% ‚Üí 84%</span>
                    </div>
                    <div class="model-change">
                        Memphis safety stock breach accepted ‚Äî no stockout occurred. Shadow cost for SKU-7742 at Memphis adjusted: <strong>$0.28/CS ‚Üí $0.24/CS</strong>.
                    </div>
                    <div class="model-impact">Impact: Slightly more aggressive inventory allocation in future</div>
                </div>

                <div class="model-update">
                    <div class="model-update-header">
                        <span class="model-name">Chargeback Probability Model</span>
                        <span class="model-confidence">Confidence: 91% ‚Üí 93%</span>
                    </div>
                    <div class="model-change">
                        Walmart DC-7 chargeback probability for promo orders: predicted <strong>6%</strong>, actual <strong>0%</strong>. Customer-specific adjustment applied.
                    </div>
                    <div class="model-impact">Impact: Lower penalty expectations for Walmart promo orders</div>
                </div>

                <div class="section-title">üìä Prediction Accuracy Trend</div>
                <div class="trend-chart">
                    <div class="trend-header">
                        <span class="trend-title">OTIF Prediction Accuracy (Last 12 Weeks)</span>
                        <span class="trend-period">Improving: 87% ‚Üí 94%</span>
                    </div>
                    <div class="trend-bars">
                        <div class="trend-bar-item">
                            <div class="trend-bar medium" style="height: 55%;"></div>
                            <span class="trend-label">W1</span>
                            <span class="trend-value">87%</span>
                        </div>
                        <div class="trend-bar-item">
                            <div class="trend-bar medium" style="height: 58%;"></div>
                            <span class="trend-label">W3</span>
                            <span class="trend-value">88%</span>
                        </div>
                        <div class="trend-bar-item">
                            <div class="trend-bar good" style="height: 65%;"></div>
                            <span class="trend-label">W5</span>
                            <span class="trend-value">89%</span>
                        </div>
                        <div class="trend-bar-item">
                            <div class="trend-bar good" style="height: 72%;"></div>
                            <span class="trend-label">W7</span>
                            <span class="trend-value">91%</span>
                        </div>
                        <div class="trend-bar-item">
                            <div class="trend-bar good" style="height: 80%;"></div>
                            <span class="trend-label">W9</span>
                            <span class="trend-value">92%</span>
                        </div>
                        <div class="trend-bar-item">
                            <div class="trend-bar good" style="height: 90%;"></div>
                            <span class="trend-label">W12</span>
                            <span class="trend-value">94%</span>
                        </div>
                    </div>
                </div>

                <div class="section-title">üöÄ Compounding Gains (YTD)</div>
                <div class="compound-card">
                    <div class="compound-header">
                        <span class="compound-title">Cumulative Value Created</span>
                        <span class="compound-period">Jan - Dec 2024</span>
                    </div>
                    <div class="compound-metrics">
                        <div class="compound-metric">
                            <div class="compound-metric-value">$2.4M</div>
                            <div class="compound-metric-label">Chargebacks Avoided</div>
                            <div class="compound-metric-delta">‚Üë 34% vs prior year</div>
                        </div>
                        <div class="compound-metric">
                            <div class="compound-metric-value">$890K</div>
                            <div class="compound-metric-label">Freight Savings</div>
                            <div class="compound-metric-delta">‚Üë 18% vs prior year</div>
                        </div>
                        <div class="compound-metric">
                            <div class="compound-metric-value">+2.1%</div>
                            <div class="compound-metric-label">Margin Improvement</div>
                            <div class="compound-metric-delta">‚Üë 0.8% vs prior year</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="action-footer">
        <div class="footer-info">
            <span>Loop Closed: <span style="color: #34d399;">Jan 22, 2025</span></span>
            <span>Models Updated: <span style="color: #a855f7;">6</span></span>
            <span>Next Recalibration: <span>Weekly batch</span></span>
        </div>
        <div class="footer-actions">
            <button class="btn btn-secondary">View Model Dashboard</button>
            <button class="btn btn-secondary">Export Learning Report</button>
            <button class="btn btn-primary">Process Next Order ‚Üí</button>
        </div>
    </div>
</body>
</html>
