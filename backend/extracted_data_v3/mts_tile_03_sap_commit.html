<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORDLY.AI MTS - Tile 3: SAP Commit & Trace</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'JetBrains Mono', monospace; background: linear-gradient(135deg, #0a0f1a 0%, #0d1520 100%); min-height: 100vh; color: #e2e8f0; }
        
        .order-context-bar { display: flex; justify-content: space-between; align-items: center; padding: 12px 24px; background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, rgba(15, 23, 42, 0.9) 100%); border-bottom: 1px solid rgba(59, 130, 246, 0.3); }
        .order-context-left { display: flex; align-items: center; gap: 24px; }
        .btn-back { display: flex; align-items: center; gap: 6px; padding: 6px 12px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 4px; color: #94a3b8; font-size: 11px; cursor: pointer; text-decoration: none; }
        .order-info { display: flex; align-items: center; gap: 16px; }
        .order-po { font-size: 16px; font-weight: 700; color: #22d3ee; }
        .order-customer { font-size: 14px; color: #e2e8f0; }
        .order-material { font-size: 12px; color: #94a3b8; }
        .order-context-right { display: flex; align-items: center; gap: 16px; }
        .order-value-amount { font-size: 18px; font-weight: 700; color: #34d399; }
        .order-value-label { font-size: 10px; color: #64748b; }
        .status-badge { padding: 6px 12px; border-radius: 4px; font-size: 11px; font-weight: 600; background: rgba(52, 211, 153, 0.15); color: #34d399; }
        
        .flow-indicator { display: flex; justify-content: center; gap: 8px; padding: 12px 24px; background: rgba(0, 0, 0, 0.2); border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
        .flow-step { display: flex; align-items: center; gap: 8px; padding: 6px 14px; border-radius: 6px; font-size: 11px; color: #64748b; background: rgba(255, 255, 255, 0.03); }
        .flow-step.active { background: rgba(59, 130, 246, 0.15); color: #3b82f6; border: 1px solid rgba(59, 130, 246, 0.3); }
        .flow-step.complete { background: rgba(52, 211, 153, 0.1); color: #34d399; }
        .flow-arrow { color: #475569; }
        
        .success-banner { display: flex; align-items: center; justify-content: center; gap: 16px; padding: 16px 24px; background: linear-gradient(90deg, rgba(52, 211, 153, 0.15) 0%, rgba(52, 211, 153, 0.05) 100%); border-bottom: 1px solid rgba(52, 211, 153, 0.3); }
        .success-icon { font-size: 28px; }
        .success-text { font-size: 14px; font-weight: 600; color: #34d399; }
        .success-so { display: flex; gap: 12px; }
        .so-item { font-size: 13px; color: #3b82f6; font-weight: 700; background: rgba(59, 130, 246, 0.1); padding: 4px 12px; border-radius: 4px; }
        
        .summary-strip { display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; padding: 16px 24px; background: rgba(0, 0, 0, 0.2); }
        .summary-card { background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px; text-align: center; }
        .summary-value { font-size: 18px; font-weight: 700; }
        .summary-value.emerald { color: #34d399; }
        .summary-value.blue { color: #3b82f6; }
        .summary-value.cyan { color: #22d3ee; }
        .summary-label { font-size: 9px; color: #64748b; text-transform: uppercase; margin-top: 4px; }
        
        .main-content { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px 24px; height: calc(100vh - 300px); }
        
        .panel { background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(15, 23, 42, 0.7) 100%); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 12px; display: flex; flex-direction: column; overflow: hidden; }
        .panel-header { padding: 16px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); background: rgba(0, 0, 0, 0.2); }
        .panel-title { font-size: 13px; font-weight: 600; color: #e2e8f0; }
        .panel-subtitle { font-size: 10px; color: #64748b; }
        .panel-content { flex: 1; overflow-y: auto; padding: 16px; }
        
        .section-title { font-size: 12px; font-weight: 600; color: #e2e8f0; margin: 16px 0 12px 0; display: flex; align-items: center; gap: 8px; }
        .section-title:first-child { margin-top: 0; }
        
        .validation-item { display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(0, 0, 0, 0.2); border-radius: 6px; margin-bottom: 6px; }
        .validation-icon { font-size: 14px; }
        .validation-name { flex: 1; font-size: 11px; color: #e2e8f0; }
        .validation-status { font-size: 10px; font-weight: 600; padding: 3px 8px; border-radius: 4px; background: rgba(52, 211, 153, 0.2); color: #34d399; }
        
        .sap-preview { background: rgba(0, 71, 133, 0.1); border: 1px solid rgba(0, 71, 133, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 16px; }
        .sap-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
        .sap-badge { padding: 4px 8px; background: linear-gradient(135deg, #004785 0%, #003366 100%); border-radius: 4px; font-size: 10px; font-weight: 700; color: white; }
        .sap-title { font-size: 12px; color: #e2e8f0; }
        .sap-node-label { font-size: 10px; color: #a855f7; font-weight: 600; margin-bottom: 8px; padding: 4px 8px; background: rgba(168, 85, 247, 0.1); border-radius: 4px; display: inline-block; }
        .sap-fields { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .sap-field { background: rgba(0, 0, 0, 0.2); border-radius: 4px; padding: 8px; }
        .sap-field-code { font-size: 9px; color: #64748b; font-family: monospace; }
        .sap-field-value { font-size: 11px; color: #e2e8f0; font-weight: 500; }
        
        .timeline { position: relative; padding-left: 24px; }
        .timeline::before { content: ''; position: absolute; left: 8px; top: 0; bottom: 0; width: 2px; background: rgba(59, 130, 246, 0.3); }
        .timeline-item { position: relative; padding-bottom: 16px; }
        .timeline-item:last-child { padding-bottom: 0; }
        .timeline-dot { position: absolute; left: -20px; top: 4px; width: 12px; height: 12px; border-radius: 50%; background: #3b82f6; border: 2px solid #0a0f1a; }
        .timeline-dot.complete { background: #34d399; }
        .timeline-content { background: rgba(0, 0, 0, 0.2); border-radius: 6px; padding: 12px; }
        .timeline-title { font-size: 11px; font-weight: 600; color: #e2e8f0; margin-bottom: 4px; }
        .timeline-detail { font-size: 10px; color: #94a3b8; line-height: 1.5; }
        .timeline-time { font-size: 9px; color: #64748b; margin-top: 6px; }
        
        .bapi-log { background: #0d1117; border-radius: 6px; padding: 12px; font-family: monospace; font-size: 10px; max-height: 200px; overflow-y: auto; }
        .log-line { padding: 4px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.05); display: flex; gap: 12px; }
        .log-time { color: #64748b; white-space: nowrap; }
        .log-msg { color: #94a3b8; }
        .log-msg.success { color: #34d399; }
        .log-msg.info { color: #3b82f6; }
        .log-msg.split { color: #a855f7; }
        
        .lineage-card { background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 12px; margin-bottom: 8px; }
        .lineage-header { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .lineage-question { font-size: 11px; font-weight: 600; color: #e2e8f0; }
        .lineage-answer { font-size: 10px; color: #94a3b8; line-height: 1.5; }
        .lineage-answer strong { color: #34d399; }
        
        .action-footer { display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; border-top: 1px solid rgba(59, 130, 246, 0.2); background: rgba(0, 0, 0, 0.3); }
        .footer-info { display: flex; gap: 16px; font-size: 11px; color: #64748b; align-items: center; }
        .footer-actions { display: flex; gap: 10px; }
        .btn { padding: 10px 18px; border-radius: 6px; font-family: inherit; font-size: 12px; font-weight: 500; cursor: pointer; }
        .btn-secondary { background: transparent; border: 1px solid rgba(255, 255, 255, 0.2); color: #94a3b8; }
        .btn-primary { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border: none; color: white; font-weight: 600; }
    </style>
</head>
<body>
    <div class="order-context-bar">
        <div class="order-context-left">
            <a href="#" class="btn-back">‚Üê Back to Queue</a>
            <div class="order-info">
                <span class="order-po">EDI-850-78432</span>
                <span class="order-customer">Walmart Distribution</span>
                <span class="order-material">SKU-7742 Energy Drink 12-Pack ‚Ä¢ 15,000 cases</span>
            </div>
        </div>
        <div class="order-context-right">
            <div style="text-align: right;">
                <div class="order-value-amount">$247,500</div>
                <div class="order-value-label">Order Value</div>
            </div>
            <div class="status-badge">‚úì COMMITTED</div>
        </div>
    </div>

    <div class="flow-indicator">
        <div class="flow-step complete"><span>‚úì</span><span>Demand Signal</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step complete"><span>‚úì</span><span>Network Optimizer</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step complete"><span>‚úì</span><span>Arbitration</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step active"><span>3</span><span>SAP Commit</span></div>
        <span class="flow-arrow">‚Üí</span>
        <div class="flow-step"><span>4</span><span>Learning Loop</span></div>
    </div>

    <div class="success-banner">
        <span class="success-icon">‚úÖ</span>
        <span class="success-text">SAP Commit Successful ‚Äî Split Shipment Created</span>
        <div class="success-so">
            <span class="so-item">SO-78234501 (Memphis)</span>
            <span class="so-item">SO-78234502 (Dallas)</span>
        </div>
    </div>

    <div class="summary-strip">
        <div class="summary-card"><div class="summary-value blue">2</div><div class="summary-label">Sales Orders</div></div>
        <div class="summary-card"><div class="summary-value emerald">Jan 18</div><div class="summary-label">Confirmed Date</div></div>
        <div class="summary-card"><div class="summary-value cyan">15,000 CS</div><div class="summary-label">Total Quantity</div></div>
        <div class="summary-card"><div class="summary-value emerald">8 min</div><div class="summary-label">Cycle Time</div></div>
        <div class="summary-card"><div class="summary-value emerald">100%</div><div class="summary-label">Validation Pass</div></div>
    </div>

    <div class="main-content">
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">Pre-Commit Validation & SAP Documents</div>
                <div class="panel-subtitle">Deterministic execution with zero ambiguity</div>
            </div>
            <div class="panel-content">
                <div class="section-title">‚úì Pre-Commit Validation (8/8 Passed)</div>
                <div class="validation-item"><span class="validation-icon">üë§</span><span class="validation-name">Customer Master - WMT-4521</span><span class="validation-status">‚úì VERIFIED</span></div>
                <div class="validation-item"><span class="validation-icon">üì¶</span><span class="validation-name">Material Master - SKU-7742</span><span class="validation-status">‚úì VERIFIED</span></div>
                <div class="validation-item"><span class="validation-icon">üí∞</span><span class="validation-name">Pricing Condition - ZPR0</span><span class="validation-status">‚úì VERIFIED</span></div>
                <div class="validation-item"><span class="validation-icon">üìä</span><span class="validation-name">ATP Check - Memphis 9K + Dallas 6K</span><span class="validation-status">‚úì CONFIRMED</span></div>
                <div class="validation-item"><span class="validation-icon">üöö</span><span class="validation-name">Shipping Point - MEM-01, DAL-01</span><span class="validation-status">‚úì ASSIGNED</span></div>
                <div class="validation-item"><span class="validation-icon">üõ§Ô∏è</span><span class="validation-name">Route Determination</span><span class="validation-status">‚úì CALCULATED</span></div>
                <div class="validation-item"><span class="validation-icon">üí≥</span><span class="validation-name">Credit Check - $4.2M Available</span><span class="validation-status">‚úì PASSED</span></div>
                <div class="validation-item"><span class="validation-icon">üìã</span><span class="validation-name">Incompletion Log</span><span class="validation-status">‚úì CLEAR</span></div>

                <div class="section-title">üìÑ SAP Sales Order - Split Shipment</div>
                
                <div class="sap-preview">
                    <div class="sap-header">
                        <span class="sap-badge">SAP</span>
                        <span class="sap-title">SO-78234501 ‚Äî Memphis Fulfillment</span>
                    </div>
                    <div class="sap-node-label">üè≠ Node 1: Memphis DC</div>
                    <div class="sap-fields">
                        <div class="sap-field"><div class="sap-field-code">AUART (Order Type)</div><div class="sap-field-value">ZOR - Standard</div></div>
                        <div class="sap-field"><div class="sap-field-code">VKORG (Sales Org)</div><div class="sap-field-value">1000 - US Sales</div></div>
                        <div class="sap-field"><div class="sap-field-code">KUNNR (Sold-to)</div><div class="sap-field-value">WMT-4521</div></div>
                        <div class="sap-field"><div class="sap-field-code">KUNWE (Ship-to)</div><div class="sap-field-value">WMT-DC7-BEN</div></div>
                        <div class="sap-field"><div class="sap-field-code">MATNR (Material)</div><div class="sap-field-value">SKU-7742</div></div>
                        <div class="sap-field"><div class="sap-field-code">KWMENG (Quantity)</div><div class="sap-field-value">9,000 CS</div></div>
                        <div class="sap-field"><div class="sap-field-code">WERKS (Plant)</div><div class="sap-field-value">MEM1 - Memphis</div></div>
                        <div class="sap-field"><div class="sap-field-code">NETWR (Net Value)</div><div class="sap-field-value">$148,500.00</div></div>
                    </div>
                </div>

                <div class="sap-preview">
                    <div class="sap-header">
                        <span class="sap-badge">SAP</span>
                        <span class="sap-title">SO-78234502 ‚Äî Dallas Fulfillment</span>
                    </div>
                    <div class="sap-node-label">üè≠ Node 2: Dallas DC</div>
                    <div class="sap-fields">
                        <div class="sap-field"><div class="sap-field-code">AUART (Order Type)</div><div class="sap-field-value">ZOR - Standard</div></div>
                        <div class="sap-field"><div class="sap-field-code">VKORG (Sales Org)</div><div class="sap-field-value">1000 - US Sales</div></div>
                        <div class="sap-field"><div class="sap-field-code">KUNNR (Sold-to)</div><div class="sap-field-value">WMT-4521</div></div>
                        <div class="sap-field"><div class="sap-field-code">KUNWE (Ship-to)</div><div class="sap-field-value">WMT-DC7-BEN</div></div>
                        <div class="sap-field"><div class="sap-field-code">MATNR (Material)</div><div class="sap-field-value">SKU-7742</div></div>
                        <div class="sap-field"><div class="sap-field-code">KWMENG (Quantity)</div><div class="sap-field-value">6,000 CS</div></div>
                        <div class="sap-field"><div class="sap-field-code">WERKS (Plant)</div><div class="sap-field-value">DAL1 - Dallas</div></div>
                        <div class="sap-field"><div class="sap-field-code">NETWR (Net Value)</div><div class="sap-field-value">$99,000.00</div></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">Decision Lineage & Audit Trail</div>
                <div class="panel-subtitle">Complete traceability from EDI to SAP commit</div>
            </div>
            <div class="panel-content">
                <div class="section-title">üìç Decision Trace</div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot complete"></div>
                        <div class="timeline-content">
                            <div class="timeline-title">1. Demand Signal Received</div>
                            <div class="timeline-detail">EDI 850 from Walmart Distribution<br>15,000 CS SKU-7742 ‚Ä¢ MABD: Jan 20</div>
                            <div class="timeline-time">Jan 12, 2025 09:42:18 CST</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot complete"></div>
                        <div class="timeline-content">
                            <div class="timeline-title">2. Volatility Classified: PROMO (78%)</div>
                            <div class="timeline-detail">3.2x normal volume ‚Ä¢ $225K penalty exposure<br>Hidden constraints: Ship complete, dock window</div>
                            <div class="timeline-time">Jan 12, 2025 09:42:34 CST</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot complete"></div>
                        <div class="timeline-content">
                            <div class="timeline-title">3. Network Optimization: Split Selected</div>
                            <div class="timeline-detail">Memphis 9K + Dallas 6K beats single-node<br>P(On-Time): 94% vs 78% ‚Ä¢ Shadow cost: $4,200</div>
                            <div class="timeline-time">Jan 12, 2025 09:43:02 CST</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot complete"></div>
                        <div class="timeline-content">
                            <div class="timeline-title">4. Arbitration: Override Approved</div>
                            <div class="timeline-detail">5/6 policies passed ‚Ä¢ Inventory flag overridden<br>Approver: Maria Santos (Ops Manager)</div>
                            <div class="timeline-time">Jan 12, 2025 09:45:41 CST</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot complete"></div>
                        <div class="timeline-content">
                            <div class="timeline-title">5. SAP Commit Success</div>
                            <div class="timeline-detail">SO-78234501 + SO-78234502 created<br>BAPI_SALESORDER_CREATEFROMDAT2 x 2</div>
                            <div class="timeline-time">Jan 12, 2025 09:50:22 CST</div>
                        </div>
                    </div>
                </div>

                <div class="section-title">‚ùì Decision Lineage Q&A</div>
                <div class="lineage-card">
                    <div class="lineage-question">Why split shipment instead of single node?</div>
                    <div class="lineage-answer">Single-node Memphis would drain inventory below safety stock and yield only <strong>78% P(On-Time)</strong>. Split achieves <strong>94% P(On-Time)</strong> with $4,200 additional freight ‚Äî justified by $225K penalty exposure.</div>
                </div>
                <div class="lineage-card">
                    <div class="lineage-question">Why not Chicago direct (highest margin)?</div>
                    <div class="lineage-answer">Chicago direct yields 31.2% margin but only <strong>62% P(On-Time)</strong> due to carrier constraints. Expected penalty cost of $85K exceeds $7K margin gain.</div>
                </div>
                <div class="lineage-card">
                    <div class="lineage-question">What risks were accepted?</div>
                    <div class="lineage-answer">Memphis inventory protection override accepted. Risk: <strong>1-day potential stockout</strong> if emergency order arrives before Jan 16 replenishment.</div>
                </div>

                <div class="section-title">üìú BAPI Execution Log</div>
                <div class="bapi-log">
                    <div class="log-line"><span class="log-time">09:50:12.102</span><span class="log-msg info">RFC connection opened to S4H-PRD-800</span></div>
                    <div class="log-line"><span class="log-time">09:50:12.245</span><span class="log-msg">BAPI_CUSTOMER_GETDETAIL2 - WMT-4521 verified</span></div>
                    <div class="log-line"><span class="log-time">09:50:12.312</span><span class="log-msg">BAPI_MATERIAL_GET_DETAIL - SKU-7742 verified</span></div>
                    <div class="log-line"><span class="log-time">09:50:12.456</span><span class="log-msg split">Split shipment mode: 2 orders</span></div>
                    <div class="log-line"><span class="log-time">09:50:13.102</span><span class="log-msg info">[Order 1] Memphis - 9,000 CS preparing...</span></div>
                    <div class="log-line"><span class="log-time">09:50:14.234</span><span class="log-msg success">[Order 1] ATP confirmed - MEM1</span></div>
                    <div class="log-line"><span class="log-time">09:50:15.567</span><span class="log-msg success">[Order 1] SO-78234501 created</span></div>
                    <div class="log-line"><span class="log-time">09:50:16.102</span><span class="log-msg info">[Order 2] Dallas - 6,000 CS preparing...</span></div>
                    <div class="log-line"><span class="log-time">09:50:17.234</span><span class="log-msg success">[Order 2] ATP confirmed - DAL1</span></div>
                    <div class="log-line"><span class="log-time">09:50:18.567</span><span class="log-msg success">[Order 2] SO-78234502 created</span></div>
                    <div class="log-line"><span class="log-time">09:50:19.890</span><span class="log-msg success">BAPI_TRANSACTION_COMMIT - Both orders committed</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="action-footer">
        <div class="footer-info">
            <span>Total Cycle: <span style="color: #34d399;">8 min end-to-end</span></span>
            <span class="sap-badge" style="margin-left: 8px;">SAP</span>
            <span style="margin-left: 4px;">SO-78234501, SO-78234502</span>
        </div>
        <div class="footer-actions">
            <button class="btn btn-secondary">View in VA03</button>
            <button class="btn btn-secondary">Download Audit</button>
            <button class="btn btn-secondary">Print ASN</button>
            <button class="btn btn-primary">Track in Learning Loop ‚Üí</button>
        </div>
    </div>
</body>
</html>
